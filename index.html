<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Winkel TV</title>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: #000;
        overflow: hidden;
        font-family: 'Segoe UI', sans-serif;
        color: white;
      }

      /* Ana layout: video solda %75, borsa paneli saÄŸda %25 */
      #layout {
        display: flex;
        height: 100vh;
        width: 100vw;
      }

      #video-container {
        position: relative;
        width: 75%;
        height: auto;
        background: black;
      }

      video {
        width: 100%;
        height: 100%;
        object-fit: contain;
        background: black;
      }

      /* Saat ve bilgi overlay */
      .overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        background: rgba(0,0,0,0.4);
        padding: 8px 12px;
        font-size: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      /* SaÄŸdaki borsa paneli */
      #sidebar {
        width: 25%;
        background: #111;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        padding: 12px;
        box-sizing: border-box;
        border-left: 2px solid #222;
      }

      #sidebar h3 {
        text-align: center;
        margin-bottom: 10px;
      }

      .stock {
        display: flex;
        justify-content: space-between;
        margin: 6px 0;
        font-size: 16px;
      }

      /* Alttaki kayan kurlar */
      #ticker {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        background: rgba(255,255,255,0.1);
        color: #00ffcc;
        white-space: nowrap;
        overflow: hidden;
      }

      #ticker span {
        display: inline-block;
        padding-left: 100%;
        animation: scroll 25s linear infinite;
      }

      @keyframes scroll {
        from { transform: translateX(0); }
        to { transform: translateX(-100%); }
      }
    </style>
  </head>
  <body>
    <div id="layout">
      <div id="video-container">
        <video id="player" autoplay muted></video>
        <div class="overlay">
          <div id="info">Winkel TV</div>
          <div id="clock"></div>
        </div>
      </div>

      <div id="sidebar">
        <h3>Borsa CanlÄ±</h3>
        <div id="stocks"></div>
      </div>
    </div>

    <div id="ticker"><span id="ticker-text">YÃ¼kleniyor...</span></div>

    <script>
      const BASE_URL = "https://winkeltv.dpdns.org";
      const PLAYLIST_URL = `${BASE_URL}/videos.json`;
      const player = document.getElementById("player");
      const clock = document.getElementById("clock");
      const stocksDiv = document.getElementById("stocks");
      const tickerText = document.getElementById("ticker-text");

      let playlist = [];
      let index = 0;

      // ðŸ•’ Saat
      function updateClock() {
        clock.textContent = new Date().toLocaleTimeString("tr-TR");
      }
      setInterval(updateClock, 1000);
      updateClock();

      // ðŸŽ¬ Video oynatma
      async function loadPlaylist() {
        try {
          const res = await fetch(PLAYLIST_URL);
          const data = await res.json();
          playlist = data.videos || [];
          if (playlist.length > 0) playVideo(0);
        } catch (err) {
          console.error("Video listesi yÃ¼klenemedi:", err);
        }
      }

      function playVideo(i) {
        index = i;
        const videoUrl = `${BASE_URL}/${playlist[index].name}`; 
        player.src = videoUrl;
        player.play().catch(console.error);
      }

      player.addEventListener("ended", () => {
        index = (index + 1) % playlist.length;
        playVideo(index);
      });

      loadPlaylist();

      // ðŸ“Š Sahte borsa verisi (Ã¶rnek)
      const stocks = [
        { name: "BIST 100", value: 9564.22, change: +0.84 },
        { name: "USD/TRY", value: 34.18, change: -0.12 },
        { name: "EUR/TRY", value: 36.45, change: +0.05 },
        { name: "ALTIN", value: 2522.1, change: +0.42 },
      ];

      function renderStocks() {
        stocksDiv.innerHTML = stocks.map(s => `
          <div class="stock">
            <span>${s.name}</span>
            <span style="color:${s.change >= 0 ? '#0f0' : '#f33'}">
              ${s.value.toFixed(2)} (${s.change >= 0 ? 'â–²' : 'â–¼'}${Math.abs(s.change)}%)
            </span>
          </div>
        `).join('');
      }
      renderStocks();

      // ðŸ’± Kayan kurlar
      function updateTicker() {
        tickerText.textContent = stocks.map(s =>
          `${s.name}: ${s.value.toFixed(2)} (${s.change >= 0 ? 'â–²' : 'â–¼'}${Math.abs(s.change)}%)`
        ).join(" | ");
      }
      updateTicker();
      setInterval(updateTicker, 10000);
    </script>
  </body>
</html>
